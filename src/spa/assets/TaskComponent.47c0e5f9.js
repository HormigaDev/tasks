import{l as Ct,aN as Tt,v as xt,y as Dt,aO as Mt,r as b,c as f,aP as Vt,w as Q,h as m,Z as ce,m as $t,g as Ht,aQ as St,C as Ke,Q as H,_ as tt,q as Yt,o as Ft,I as K,P as ne,K as j,j as p,aI as _e,M as G,O as je,aG as Se,U as be,S as Ot,aR as jt,aK as at,aL as st,L as Ye,J as Bt,V as It,F as Nt,Y as Qt,aH as Et}from"./index.1526ceda.js";import{Q as Ge}from"./QSelect.bc0c6282.js";import{u as At,a as Ut,b as zt,t as Ze,g as z,f as Rt,c as Pt,j as Fe,_ as Lt,d as Wt}from"./date.38a4309f.js";import{p as me}from"./format.e5b37dc8.js";import{Q as Jt}from"./QForm.e88a91f9.js";import{A}from"./configs.3bfa595d.js";import{s as pe,L as Kt}from"./utils.1e00f14b.js";import{E,u as Gt}from"./EventBus.cd526070.js";import{Q as Zt}from"./QList.050e965c.js";async function Va(a=0,l=10,d=[0],h="",n="run_date",g="asc",r=0,_=!1,M=!1,I=!1){d.length||(d=[0]);const q=new URLSearchParams;q.append("page",a),q.append("limit",l),q.append("categories",d.join(",")),q.append("search",h),q.append("order_by",n),q.append("asc_desc",g),q.append("priority",r),q.append("fixed",_?1:0),q.append("show_archives",M?1:0),q.append("show_endeds",I?1:0);const{data:S,status:Z}=await A.get(`/get-tasks?${q.toString()}`);return{data:S,status:Z}}async function Xt(a,l,d,h,n=[]){const{data:g,status:r}=await A.post("/new-task",{title:a,description:l,run_date:d,priority_id:h,categories:JSON.stringify(n)});return{data:g,status:r}}async function nt(a,l){var S;l||(l={});const{title:d,description:h,status:n,fixed:g,priority_id:r,run_date:_,categories:M}=l,{data:I,status:q}=await A.put("/edit-task",{task_id:a,title:d,description:h,status:n,fixed:g?1:0,priority_id:r,run_date:_,categories:(S=M==null?void 0:M.join(","))!=null?S:""});return{data:I,status:q}}async function ea(a){console.log("ID de la tarea a eliminar: ",a);const{data:l,status:d}=await A.delete(`/delete-task?task_id=${a}`);return{data:l,status:d}}async function $a(a,l){const{data:d,status:h}=await A.get(`/get-tasks-by-month?month=${a}&year=${l}`);return{data:d,status:h}}async function Xe(){return await A.get("/get-categories")}async function Ha(a,l,d){const{data:h,status:n}=await A.post("/new-category",{name:a,color:l,icon:d});return{data:h,status:n}}async function Sa(a,l,d,h){const{data:n,status:g}=await A.put("/edit-category",{category_id:a,name:l,color:d,icon:h});return{data:n,status:g}}async function Ya(a){const{data:l,status:d}=await A.delete("/delete-category?category_id="+a);return{data:l,status:d}}const J=20,ta=["Calendar","Years","Months"],et=a=>ta.includes(a),Oe=a=>/^-?[\d]+\/[0-1]\d$/.test(a),se=" \u2014 ";function R(a){return a.year+"/"+me(a.month)}var aa=Ct({name:"QDate",props:{...At,...Tt,...xt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Oe},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Oe},navigationMaxYearMonth:{type:String,validator:Oe},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:et}},emits:[...Ut,"rangeStart","rangeEnd","navigation"],setup(a,{slots:l,emit:d}){const{proxy:h}=Ht(),{$q:n}=h,g=Dt(a,n),{getCache:r}=Wt(),{tabindex:_,headerClass:M,getLocale:I,getCurrentDate:q}=zt(a,n);let S;const Z=Mt(a),le=St(Z),oe=b(null),x=b(Ue()),w=b(I()),ve=f(()=>Ue()),fe=f(()=>I()),Y=f(()=>q()),c=b(ze(x.value,w.value)),D=b(a.defaultView),ie=n.lang.rtl===!0?"right":"left",P=b(ie.value),C=b(ie.value),N=c.value.year,F=b(N-N%J-(N<0?J:0)),T=b(null),lt=f(()=>{const e=a.landscape===!0?"landscape":"portrait";return`q-date q-date--${e} q-date--${e}-${a.minimal===!0?"minimal":"standard"}`+(g.value===!0?" q-date--dark q-dark":"")+(a.bordered===!0?" q-date--bordered":"")+(a.square===!0?" q-date--square no-border-radius":"")+(a.flat===!0?" q-date--flat no-shadow":"")+(a.disable===!0?" disabled":a.readonly===!0?" q-date--readonly":"")}),L=f(()=>a.color||"primary"),X=f(()=>a.textColor||"white"),he=f(()=>a.emitImmediately===!0&&a.multiple!==!0&&a.range!==!0),qe=f(()=>Array.isArray(a.modelValue)===!0?a.modelValue:a.modelValue!==null&&a.modelValue!==void 0?[a.modelValue]:[]),B=f(()=>qe.value.filter(e=>typeof e=="string").map(e=>De(e,x.value,w.value)).filter(e=>e.dateHash!==null&&e.day!==null&&e.month!==null&&e.year!==null)),ee=f(()=>{const e=t=>De(t,x.value,w.value);return qe.value.filter(t=>Vt(t)===!0&&t.from!==void 0&&t.to!==void 0).map(t=>({from:e(t.from),to:e(t.to)})).filter(t=>t.from.dateHash!==null&&t.to.dateHash!==null&&t.from.dateHash<t.to.dateHash)}),ge=f(()=>a.calendar!=="persian"?e=>new Date(e.year,e.month-1,e.day):e=>{const t=Ze(e.year,e.month,e.day);return new Date(t.gy,t.gm-1,t.gd)}),Ce=f(()=>a.calendar==="persian"?z:(e,t,s)=>Rt(new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),t===void 0?x.value:t,s===void 0?w.value:s,e.year,e.timezoneOffset)),re=f(()=>B.value.length+ee.value.reduce((e,t)=>e+1+Pt(ge.value(t.to),ge.value(t.from)),0)),Be=f(()=>{if(a.title!==void 0&&a.title!==null&&a.title.length!==0)return a.title;if(T.value!==null){const s=T.value.init,o=ge.value(s);return w.value.daysShort[o.getDay()]+", "+w.value.monthsShort[s.month-1]+" "+s.day+se+"?"}if(re.value===0)return se;if(re.value>1)return`${re.value} ${w.value.pluralDay}`;const e=B.value[0],t=ge.value(e);return isNaN(t.valueOf())===!0?se:w.value.headerTitle!==void 0?w.value.headerTitle(t,e):w.value.daysShort[t.getDay()]+", "+w.value.monthsShort[e.month-1]+" "+e.day}),ot=f(()=>B.value.concat(ee.value.map(t=>t.from)).sort((t,s)=>t.year-s.year||t.month-s.month)[0]),it=f(()=>B.value.concat(ee.value.map(t=>t.to)).sort((t,s)=>s.year-t.year||s.month-t.month)[0]),Ie=f(()=>{if(a.subtitle!==void 0&&a.subtitle!==null&&a.subtitle.length!==0)return a.subtitle;if(re.value===0)return se;if(re.value>1){const e=ot.value,t=it.value,s=w.value.monthsShort;return s[e.month-1]+(e.year!==t.year?" "+e.year+se+s[t.month-1]+" ":e.month!==t.month?se+s[t.month-1]:"")+" "+t.year}return B.value[0].year}),ye=f(()=>{const e=[n.iconSet.datetime.arrowLeft,n.iconSet.datetime.arrowRight];return n.lang.rtl===!0?e.reverse():e}),Ne=f(()=>a.firstDayOfWeek!==void 0?Number(a.firstDayOfWeek):w.value.firstDayOfWeek),rt=f(()=>{const e=w.value.daysShort,t=Ne.value;return t>0?e.slice(t,7).concat(e.slice(0,t)):e}),U=f(()=>{const e=c.value;return a.calendar!=="persian"?new Date(e.year,e.month,0).getDate():Fe(e.year,e.month)}),ut=f(()=>typeof a.eventColor=="function"?a.eventColor:()=>a.eventColor),V=f(()=>{if(a.navigationMinYearMonth===void 0)return null;const e=a.navigationMinYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),$=f(()=>{if(a.navigationMaxYearMonth===void 0)return null;const e=a.navigationMaxYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),Te=f(()=>{const e={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return V.value!==null&&V.value.year>=c.value.year&&(e.year.prev=!1,V.value.year===c.value.year&&V.value.month>=c.value.month&&(e.month.prev=!1)),$.value!==null&&$.value.year<=c.value.year&&(e.year.next=!1,$.value.year===c.value.year&&$.value.month<=c.value.month&&(e.month.next=!1)),e}),ke=f(()=>{const e={};return B.value.forEach(t=>{const s=R(t);e[s]===void 0&&(e[s]=[]),e[s].push(t.day)}),e}),Qe=f(()=>{const e={};return ee.value.forEach(t=>{const s=R(t.from),o=R(t.to);if(e[s]===void 0&&(e[s]=[]),e[s].push({from:t.from.day,to:s===o?t.to.day:void 0,range:t}),s<o){let i;const{year:y,month:u}=t.from,v=u<12?{year:y,month:u+1}:{year:y+1,month:1};for(;(i=R(v))<=o;)e[i]===void 0&&(e[i]=[]),e[i].push({from:void 0,to:i===o?t.to.day:void 0,range:t}),v.month++,v.month>12&&(v.year++,v.month=1)}}),e}),ue=f(()=>{if(T.value===null)return;const{init:e,initHash:t,final:s,finalHash:o}=T.value,[i,y]=t<=o?[e,s]:[s,e],u=R(i),v=R(y);if(u!==O.value&&v!==O.value)return;const k={};return u===O.value?(k.from=i.day,k.includeFrom=!0):k.from=1,v===O.value?(k.to=y.day,k.includeTo=!0):k.to=U.value,k}),O=f(()=>R(c.value)),dt=f(()=>{const e={};if(a.options===void 0){for(let s=1;s<=U.value;s++)e[s]=!0;return e}const t=typeof a.options=="function"?a.options:s=>a.options.includes(s);for(let s=1;s<=U.value;s++){const o=O.value+"/"+me(s);e[s]=t(o)}return e}),ct=f(()=>{const e={};if(a.events===void 0)for(let t=1;t<=U.value;t++)e[t]=!1;else{const t=typeof a.events=="function"?a.events:s=>a.events.includes(s);for(let s=1;s<=U.value;s++){const o=O.value+"/"+me(s);e[s]=t(o)===!0&&ut.value(o)}}return e}),mt=f(()=>{let e,t;const{year:s,month:o}=c.value;if(a.calendar!=="persian")e=new Date(s,o-1,1),t=new Date(s,o-1,0).getDate();else{const i=Ze(s,o,1);e=new Date(i.gy,i.gm-1,i.gd);let y=o-1,u=s;y===0&&(y=12,u--),t=Fe(u,y)}return{days:e.getDay()-Ne.value-1,endDay:t}}),Ee=f(()=>{const e=[],{days:t,endDay:s}=mt.value,o=t<0?t+7:t;if(o<6)for(let u=s-o;u<=s;u++)e.push({i:u,fill:!0});const i=e.length;for(let u=1;u<=U.value;u++){const v={i:u,event:ct.value[u],classes:[]};dt.value[u]===!0&&(v.in=!0,v.flat=!0),e.push(v)}if(ke.value[O.value]!==void 0&&ke.value[O.value].forEach(u=>{const v=i+u-1;Object.assign(e[v],{selected:!0,unelevated:!0,flat:!1,color:L.value,textColor:X.value})}),Qe.value[O.value]!==void 0&&Qe.value[O.value].forEach(u=>{if(u.from!==void 0){const v=i+u.from-1,k=i+(u.to||U.value)-1;for(let de=v;de<=k;de++)Object.assign(e[de],{range:u.range,unelevated:!0,color:L.value,textColor:X.value});Object.assign(e[v],{rangeFrom:!0,flat:!1}),u.to!==void 0&&Object.assign(e[k],{rangeTo:!0,flat:!1})}else if(u.to!==void 0){const v=i+u.to-1;for(let k=i;k<=v;k++)Object.assign(e[k],{range:u.range,unelevated:!0,color:L.value,textColor:X.value});Object.assign(e[v],{flat:!1,rangeTo:!0})}else{const v=i+U.value-1;for(let k=i;k<=v;k++)Object.assign(e[k],{range:u.range,unelevated:!0,color:L.value,textColor:X.value})}}),ue.value!==void 0){const u=i+ue.value.from-1,v=i+ue.value.to-1;for(let k=u;k<=v;k++)e[k].color=L.value,e[k].editRange=!0;ue.value.includeFrom===!0&&(e[u].editRangeFrom=!0),ue.value.includeTo===!0&&(e[v].editRangeTo=!0)}c.value.year===Y.value.year&&c.value.month===Y.value.month&&(e[i+Y.value.day-1].today=!0);const y=e.length%7;if(y>0){const u=7-y;for(let v=1;v<=u;v++)e.push({i:v,fill:!0})}return e.forEach(u=>{let v="q-date__calendar-item ";u.fill===!0?v+="q-date__calendar-item--fill":(v+=`q-date__calendar-item--${u.in===!0?"in":"out"}`,u.range!==void 0&&(v+=` q-date__range${u.rangeTo===!0?"-to":u.rangeFrom===!0?"-from":""}`),u.editRange===!0&&(v+=` q-date__edit-range${u.editRangeFrom===!0?"-from":""}${u.editRangeTo===!0?"-to":""}`),(u.range!==void 0||u.editRange===!0)&&(v+=` text-${u.color}`)),u.classes=v}),e}),vt=f(()=>a.disable===!0?{"aria-disabled":"true"}:{});Q(()=>a.modelValue,e=>{if(S===e)S=0;else{const t=ze(x.value,w.value);te(t.year,t.month,t)}}),Q(D,()=>{oe.value!==null&&h.$el.contains(document.activeElement)===!0&&oe.value.focus()}),Q(()=>c.value.year+"|"+c.value.month,()=>{d("navigation",{year:c.value.year,month:c.value.month})}),Q(ve,e=>{Je(e,w.value,"mask"),x.value=e}),Q(fe,e=>{Je(x.value,e,"locale"),w.value=e});function Ae(){const{year:e,month:t,day:s}=Y.value,o={...c.value,year:e,month:t,day:s},i=ke.value[R(o)];(i===void 0||i.includes(o.day)===!1)&&Ve(o),xe(o.year,o.month)}function ft(e){et(e)===!0&&(D.value=e)}function ht(e,t){["month","year"].includes(e)&&(e==="month"?Pe:Me)(t===!0?-1:1)}function xe(e,t){D.value="Calendar",te(e,t)}function gt(e,t){if(a.range===!1||!e){T.value=null;return}const s=Object.assign({...c.value},e),o=t!==void 0?Object.assign({...c.value},t):s;T.value={init:s,initHash:z(s),final:o,finalHash:z(o)},xe(s.year,s.month)}function Ue(){return a.calendar==="persian"?"YYYY/MM/DD":a.mask}function De(e,t,s){return Lt(e,t,s,a.calendar,{hour:0,minute:0,second:0,millisecond:0})}function ze(e,t){const s=Array.isArray(a.modelValue)===!0?a.modelValue:a.modelValue?[a.modelValue]:[];if(s.length===0)return Re();const o=s[s.length-1],i=De(o.from!==void 0?o.from:o,e,t);return i.dateHash===null?Re():i}function Re(){let e,t;if(a.defaultYearMonth!==void 0){const s=a.defaultYearMonth.split("/");e=parseInt(s[0],10),t=parseInt(s[1],10)}else{const s=Y.value!==void 0?Y.value:q();e=s.year,t=s.month}return{year:e,month:t,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:e+"/"+me(t)+"/01"}}function Pe(e){let t=c.value.year,s=Number(c.value.month)+e;s===13?(s=1,t++):s===0&&(s=12,t--),te(t,s),he.value===!0&&we("month")}function Me(e){const t=Number(c.value.year)+e;te(t,c.value.month),he.value===!0&&we("year")}function yt(e){te(e,c.value.month),D.value=a.defaultView==="Years"?"Months":"Calendar",he.value===!0&&we("year")}function kt(e){te(c.value.year,e),D.value="Calendar",he.value===!0&&we("month")}function wt(e,t){const s=ke.value[t];(s!==void 0&&s.includes(e.day)===!0?$e:Ve)(e)}function W(e){return{year:e.year,month:e.month,day:e.day}}function te(e,t,s){if(V.value!==null&&e<=V.value.year&&((t<V.value.month||e<V.value.year)&&(t=V.value.month),e=V.value.year),$.value!==null&&e>=$.value.year&&((t>$.value.month||e>$.value.year)&&(t=$.value.month),e=$.value.year),s!==void 0){const{hour:i,minute:y,second:u,millisecond:v,timezoneOffset:k,timeHash:de}=s;Object.assign(c.value,{hour:i,minute:y,second:u,millisecond:v,timezoneOffset:k,timeHash:de})}const o=e+"/"+me(t)+"/01";o!==c.value.dateHash&&(P.value=c.value.dateHash<o==(n.lang.rtl!==!0)?"left":"right",e!==c.value.year&&(C.value=P.value),Ke(()=>{F.value=e-e%J-(e<0?J:0),Object.assign(c.value,{year:e,month:t,day:1,dateHash:o})}))}function Le(e,t,s){const o=e!==null&&e.length===1&&a.multiple===!1?e[0]:e;S=o;const{reason:i,details:y}=We(t,s);d("update:modelValue",o,i,y)}function we(e){const t=B.value[0]!==void 0&&B.value[0].dateHash!==null?{...B.value[0]}:{...c.value};Ke(()=>{t.year=c.value.year,t.month=c.value.month;const s=a.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Fe(t.year,t.month);t.day=Math.min(Math.max(1,t.day),s);const o=ae(t);S=o;const{details:i}=We("",t);d("update:modelValue",o,e,i)})}function We(e,t){return t.from!==void 0?{reason:`${e}-range`,details:{...W(t.target),from:W(t.from),to:W(t.to)}}:{reason:`${e}-day`,details:W(t)}}function ae(e,t,s){return e.from!==void 0?{from:Ce.value(e.from,t,s),to:Ce.value(e.to,t,s)}:Ce.value(e,t,s)}function Ve(e){let t;if(a.multiple===!0)if(e.from!==void 0){const s=z(e.from),o=z(e.to),i=B.value.filter(u=>u.dateHash<s||u.dateHash>o),y=ee.value.filter(({from:u,to:v})=>v.dateHash<s||u.dateHash>o);t=i.concat(y).concat(e).map(u=>ae(u))}else{const s=qe.value.slice();s.push(ae(e)),t=s}else t=ae(e);Le(t,"add",e)}function $e(e){if(a.noUnset===!0)return;let t=null;if(a.multiple===!0&&Array.isArray(a.modelValue)===!0){const s=ae(e);e.from!==void 0?t=a.modelValue.filter(o=>o.from!==void 0?o.from!==s.from&&o.to!==s.to:!0):t=a.modelValue.filter(o=>o!==s),t.length===0&&(t=null)}Le(t,"remove",e)}function Je(e,t,s){const o=B.value.concat(ee.value).map(i=>ae(i,e,t)).filter(i=>i.from!==void 0?i.from.dateHash!==null&&i.to.dateHash!==null:i.dateHash!==null);d("update:modelValue",(a.multiple===!0?o:o[0])||null,s)}function pt(){if(a.minimal!==!0)return m("div",{class:"q-date__header "+M.value},[m("div",{class:"relative-position"},[m(ce,{name:"q-transition--fade"},()=>m("div",{key:"h-yr-"+Ie.value,class:"q-date__header-subtitle q-date__header-link "+(D.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:_.value,...r("vY",{onClick(){D.value="Years"},onKeyup(e){e.keyCode===13&&(D.value="Years")}})},[Ie.value]))]),m("div",{class:"q-date__header-title relative-position flex no-wrap"},[m("div",{class:"relative-position col"},[m(ce,{name:"q-transition--fade"},()=>m("div",{key:"h-sub"+Be.value,class:"q-date__header-title-label q-date__header-link "+(D.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:_.value,...r("vC",{onClick(){D.value="Calendar"},onKeyup(e){e.keyCode===13&&(D.value="Calendar")}})},[Be.value]))]),a.todayBtn===!0?m(H,{class:"q-date__header-today self-start",icon:n.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:_.value,onClick:Ae}):null])])}function He({label:e,type:t,key:s,dir:o,goTo:i,boundaries:y,cls:u}){return[m("div",{class:"row items-center q-date__arrow"},[m(H,{round:!0,dense:!0,size:"sm",flat:!0,icon:ye.value[0],tabindex:_.value,disable:y.prev===!1,...r("go-#"+t,{onClick(){i(-1)}})})]),m("div",{class:"relative-position overflow-hidden flex flex-center"+u},[m(ce,{name:"q-transition--jump-"+o},()=>m("div",{key:s},[m(H,{flat:!0,dense:!0,noCaps:!0,label:e,tabindex:_.value,...r("view#"+t,{onClick:()=>{D.value=t}})})]))]),m("div",{class:"row items-center q-date__arrow"},[m(H,{round:!0,dense:!0,size:"sm",flat:!0,icon:ye.value[1],tabindex:_.value,disable:y.next===!1,...r("go+#"+t,{onClick(){i(1)}})})])]}const bt={Calendar:()=>[m("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[m("div",{class:"q-date__navigation row items-center no-wrap"},He({label:w.value.months[c.value.month-1],type:"Months",key:c.value.month,dir:P.value,goTo:Pe,boundaries:Te.value.month,cls:" col"}).concat(He({label:c.value.year,type:"Years",key:c.value.year,dir:C.value,goTo:Me,boundaries:Te.value.year,cls:""}))),m("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},rt.value.map(e=>m("div",{class:"q-date__calendar-item"},[m("div",e)]))),m("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[m(ce,{name:"q-transition--slide-"+P.value},()=>m("div",{key:O.value,class:"q-date__calendar-days fit"},Ee.value.map(e=>m("div",{class:e.classes},[e.in===!0?m(H,{class:e.today===!0?"q-date__today":"",dense:!0,flat:e.flat,unelevated:e.unelevated,color:e.color,textColor:e.textColor,label:e.i,tabindex:_.value,...r("day#"+e.i,{onClick:()=>{_t(e.i)},onMouseover:()=>{qt(e.i)}})},e.event!==!1?()=>m("div",{class:"q-date__event bg-"+e.event}):null):m("div",""+e.i)]))))])])],Months(){const e=c.value.year===Y.value.year,t=o=>V.value!==null&&c.value.year===V.value.year&&V.value.month>o||$.value!==null&&c.value.year===$.value.year&&$.value.month<o,s=w.value.monthsShort.map((o,i)=>{const y=c.value.month===i+1;return m("div",{class:"q-date__months-item flex flex-center"},[m(H,{class:e===!0&&Y.value.month===i+1?"q-date__today":null,flat:y!==!0,label:o,unelevated:y,color:y===!0?L.value:null,textColor:y===!0?X.value:null,tabindex:_.value,disable:t(i+1),...r("month#"+i,{onClick:()=>{kt(i+1)}})})])});return a.yearsInMonthView===!0&&s.unshift(m("div",{class:"row no-wrap full-width"},[He({label:c.value.year,type:"Years",key:c.value.year,dir:C.value,goTo:Me,boundaries:Te.value.year,cls:" col"})])),m("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},s)},Years(){const e=F.value,t=e+J,s=[],o=i=>V.value!==null&&V.value.year>i||$.value!==null&&$.value.year<i;for(let i=e;i<=t;i++){const y=c.value.year===i;s.push(m("div",{class:"q-date__years-item flex flex-center"},[m(H,{key:"yr"+i,class:Y.value.year===i?"q-date__today":null,flat:!y,label:i,dense:!0,unelevated:y,color:y===!0?L.value:null,textColor:y===!0?X.value:null,tabindex:_.value,disable:o(i),...r("yr#"+i,{onClick:()=>{yt(i)}})})]))}return m("div",{class:"q-date__view q-date__years flex flex-center"},[m("div",{class:"col-auto"},[m(H,{round:!0,dense:!0,flat:!0,icon:ye.value[0],tabindex:_.value,disable:o(e),...r("y-",{onClick:()=>{F.value-=J}})})]),m("div",{class:"q-date__years-content col self-stretch row items-center"},s),m("div",{class:"col-auto"},[m(H,{round:!0,dense:!0,flat:!0,icon:ye.value[1],tabindex:_.value,disable:o(t),...r("y+",{onClick:()=>{F.value+=J}})})])])}};function _t(e){const t={...c.value,day:e};if(a.range===!1){wt(t,O.value);return}if(T.value===null){const s=Ee.value.find(i=>i.fill!==!0&&i.i===e);if(a.noUnset!==!0&&s.range!==void 0){$e({target:t,from:s.range.from,to:s.range.to});return}if(s.selected===!0){$e(t);return}const o=z(t);T.value={init:t,initHash:o,final:t,finalHash:o},d("rangeStart",W(t))}else{const s=T.value.initHash,o=z(t),i=s<=o?{from:T.value.init,to:t}:{from:t,to:T.value.init};T.value=null,Ve(s===o?t:{target:t,...i}),d("rangeEnd",{from:W(i.from),to:W(i.to)})}}function qt(e){if(T.value!==null){const t={...c.value,day:e};Object.assign(T.value,{final:t,finalHash:z(t)})}}return Object.assign(h,{setToday:Ae,setView:ft,offsetCalendar:ht,setCalendarTo:xe,setEditingRange:gt}),()=>{const e=[m("div",{class:"q-date__content col relative-position"},[m(ce,{name:"q-transition--fade"},bt[D.value])])],t=$t(l.default);return t!==void 0&&e.push(m("div",{class:"q-date__actions"},t)),a.name!==void 0&&a.disable!==!0&&le(e,"push"),m("div",{class:lt.value,...vt.value},[pt(),m("div",{ref:oe,class:"q-date__main col column",tabindex:-1},e)])}}});const sa={name:"NewTaskComponent",props:{show:Boolean,_theme:String,_configurations:Object},emits:["update:show"],data(a){var ve,fe,Y,c,D,ie,P;const l=b(a._theme),d=b(a._configurations),h=[{label:this.$t("pages.tasks.inputs.options.priorities.low"),value:1},{label:this.$t("pages.tasks.inputs.options.priorities.normal"),value:2},{label:this.$t("pages.tasks.inputs.options.priorities.high"),value:3},{label:this.$t("pages.tasks.inputs.options.priorities.urgent"),value:4}],n={title:{exp:/^.{10,100}$/i,message:this.$t("pages.tasks.messages.invalid_title")},description:{exp:/^.{20,5000}$/i,message:this.$t("pages.tasks.messages.invalid_description")},date:{exp:/^(\d{4})-(\d{2})-(\d{2})$/i,message:this.$t("pages.tasks.messages.invalid_date")}},g=b([]),r=b(!1),_=b(a.show),M=new Date;let[I,q,S]=(fe=(ve=pe.get("current_date"))==null?void 0:ve.split("-"))!=null?fe:["2000","01","01"];const Z=b((c=(Y=pe.get("current_date"))==null?void 0:Y.split("-").join("/"))!=null?c:`${I!=null?I:M.getFullYear()}/${q!=null?q:M.getMonth()+1}/${S!=null?S:M.getDate()}`),le=b((ie=(D=pe.get("current_date"))==null?void 0:D.split("-").reverse().join("/"))!=null?ie:`${("0"+M.getDate()).slice(-2)}/${("0"+(M.getMonth()+1)).slice(-2)}/${M.getFullYear()}`),oe={low:1,normal:2,high:3,urgent:4},x=b({title:"",description:"",priority:(P=d.value)!=null&&P.defaultPriority?{label:this.$t(`pages.tasks.inputs.options.priorities.${d.value.defaultPriority}`),value:oe[d.value.defaultPriority]}:{label:this.$t("pages.tasks.inputs.options.priorities.normal"),value:2},categories:[],date:b(le)}),w=new Kt(()=>{const C=pe.get("current_date");if(C){let[N,F,T]=C.split("-");Z.value=`${N}/${F}/${T}`,le.value=`${T}/${F}/${N}`}});return w.start(),Yt(()=>{w.stop()}),Ft(()=>{Xe().then(({data:C,status:N})=>{if(N===200){g.value=[];for(const F of C.categories)g.value.push({label:F.name,value:F.id})}})}),E.on("edit-task",C=>{x.value.title=C.title,x.value.description=C.description,x.value.priority={label:this.$t(`pages.tasks.inputs.options.priorities.${C.priority.name}`),value:C.priority.weight},x.value.categories=C.categories,r.value=!0}),Q(()=>a.show,C=>{Xe().then(({data:N,status:F})=>{if(F===200){g.value=[];for(const T of N.categories)g.value.push({label:T.name,value:T.id})}}),r.value===!1&&(x.value.title="",x.value.description="",x.value.categories=[]),_.value=C}),Q(()=>a._theme,C=>{l.value=C}),Q(()=>a._configurations,C=>{d.value=C}),{theme:l,rules:n,editing:r,today2:le,showForm:_,priorities:h,categories:g,newTask:x,showCalendar:b(!1),date:b(Z)}},methods:{resetForm(){this.newTask.title="",this.newTask.description="",this.newTask.priority={label:"Normal",value:2},this.newTask.categories=[]},updateDate(a){let[l,d,h]=a.split("/");this.newTask.realDate=`${l}-${d}-${h}`,this.newTask.date=`${h}/${d}/${l}`,this.showCalendar=!1},saveNewTask(){if(!this.rules.title.exp.test(this.newTask.title)){this.$q.notify({message:this.rules.title.message,color:"red-5",position:"bottom-right",timeout:2e3});return}if(this.newTask.description.length>5e3||this.newTask.description.length<20){this.$q.notify({message:this.rules.description.message,color:"red-5",position:"bottom-right",timeout:2e3});return}const[a,l,d]=this.newTask.date.split("/"),h=`${d}-${l}-${a}`;if(!this.rules.date.exp.test(h)){this.$q.notify({message:this.rules.date.message,color:"red-5",position:"bottom-right",timeout:2e3});return}const n=this.newTask.categories.map(r=>r.value),g=this.newTask.priority.value;Xt(this.newTask.title,this.newTask.description,h,g,n).then(({status:r})=>{r===201?(this.$q.notify({message:this.$t("pages.tasks.messages.task_saved"),color:"green-5",position:"bottom-right",timeout:2e3}),this.resetForm(),E.emit("task-added"),this.$emit("update:show",!1)):this.$q.notify({message:this.$t("pages.tasks.messages.error_saving_task"),color:"red-5",position:"bottom-right",timeout:2e3})}).catch(r=>{console.log(r),this.$q.notify({message:this.$t("pages.tasks.messages.error_saving_task"),color:"red-5",position:"bottom-right",timeout:2e3})})},editTask(){if(!this.rules.title.exp.test(this.newTask.title)){this.$q.notify({message:this.rules.title.message,color:"red-5",position:"bottom-right",timeout:2e3});return}if(this.newTask.description.length>5e3||this.newTask.description.length<20){this.$q.notify({message:this.rules.description.message,color:"red-5",position:"bottom-right",timeout:2e3});return}const[a,l,d]=this.newTask.date.split("/"),h=`${d}-${l}-${a}`;if(!this.rules.date.exp.test(h)){this.$q.notify({message:this.rules.date.message,color:"red-5",position:"bottom-right",timeout:2e3});return}const n=this.newTask.categories.map(r=>r.value),g=this.newTask.priority.value;nt(this.newTask.id,{title:this.newTask.title,description:this.newTask.description,run_date:h,priority_id:g,categories:n}).then(({status:r})=>{r===200?(this.$q.notify({message:this.$t("pages.tasks.messages.task_updated"),color:"green-5",position:"bottom-right",timeout:2e3}),this.resetForm(),E.emit("task-edited"),this.$emit("update:show",!1)):this.$q.notify({message:this.$t("pages.tasks.messages.error_updating_task"),color:"red-5",position:"bottom-right",timeout:2e3})}).catch(r=>{console.log(r),this.$q.notify({message:this.$t("pages.tasks.messages.error_updating_task"),color:"red-5",position:"bottom-right",timeout:2e3})})},cancelNewTask(){this.$emit("update:show",!1),this.resetForm()}}},na={class:"text-h6"},la={class:"flex flex-center q-mt-md"};function oa(a,l,d,h,n,g){return K(),ne(st,{persistent:"",modelValue:n.showForm,"onUpdate:modelValue":l[8]||(l[8]=r=>n.showForm=r),dark:n.theme==="dark"},{default:j(()=>[p(at,{style:{"min-width":"560px","max-height":"90vh","margin-top":"8vh"},dark:n.theme==="dark"},{default:j(()=>[p(_e,null,{default:j(()=>[G("div",na,je(n.editing?a.$t("pages.tasks.titles.edit_task"):a.$t("pages.tasks.titles.new_task")),1)]),_:1}),p(_e,{class:"q-pt-none"},{default:j(()=>[p(Jt,null,{default:j(()=>[p(Se,{outlined:"",modelValue:n.newTask.title,"onUpdate:modelValue":l[0]||(l[0]=r=>n.newTask.title=r),dark:n.theme==="dark",dense:"",label:a.$t("pages.tasks.inputs.labels.title"),class:"q-mt-md",color:n.theme==="dark"?"white":"dark","label-color":"grey-7",maxlength:"100"},null,8,["modelValue","dark","label","color"]),p(Se,{dark:n.theme==="dark",dense:"",outlined:"",modelValue:n.newTask.description,"onUpdate:modelValue":l[1]||(l[1]=r=>n.newTask.description=r),label:a.$t("pages.tasks.inputs.labels.description"),type:"textarea",class:"q-mt-md",color:n.theme==="dark"?"white":"dark","label-color":"grey-7",maxlength:"5000"},null,8,["dark","modelValue","label","color"]),p(Ge,{dark:n.theme==="dark",dense:"",outlined:"",modelValue:n.newTask.priority,"onUpdate:modelValue":l[2]||(l[2]=r=>n.newTask.priority=r),label:a.$t("pages.tasks.inputs.labels.priority"),options:n.priorities,class:"q-mt-md",color:n.theme==="dark"?"white":"dark","label-color":"grey-7"},null,8,["dark","modelValue","label","options","color"]),p(Ge,{dark:n.theme==="dark",outlined:"",dense:"",modelValue:n.newTask.categories,"onUpdate:modelValue":l[3]||(l[3]=r=>n.newTask.categories=r),multiple:"",options:n.categories,label:a.$t("pages.tasks.inputs.labels.categories"),class:"q-mt-md",color:n.theme==="dark"?"white":"dark","label-color":"grey-7"},null,8,["dark","modelValue","options","label","color"]),p(Se,{dark:n.theme==="dark",color:n.theme==="dark"?"white":"dark",outlined:"",dense:"",modelValue:n.newTask.date,"onUpdate:modelValue":l[5]||(l[5]=r=>n.newTask.date=r),label:a.$t("pages.tasks.inputs.labels.date"),class:"q-mt-md",readonly:"","label-color":"grey-7"},{append:j(()=>[p(be,{name:"calendar_month",onClick:l[4]||(l[4]=r=>n.showCalendar=!0)})]),_:1},8,["dark","color","modelValue","label"]),G("div",la,[n.showCalendar?(K(),ne(aa,{key:0,dense:"",dark:n.theme==="dark",minimal:"",modelValue:n.date,"onUpdate:modelValue":[l[6]||(l[6]=r=>n.date=r),g.updateDate]},null,8,["dark","modelValue","onUpdate:modelValue"])):Ot("",!0)])]),_:1})]),_:1}),p(jt,{align:"right",class:"text-primary"},{default:j(()=>[p(H,{flat:"",color:n.theme==="dark"?"grey-5":"grey-9",label:a.$t("pages.tasks.buttons.cancel"),onClick:g.cancelNewTask},null,8,["color","label","onClick"]),p(H,{flat:"",label:n.editing?a.$t("pages.tasks.buttons.update"):a.$t("pages.tasks.buttons.save"),onClick:l[7]||(l[7]=r=>n.editing?g.editTask():g.saveNewTask())},null,8,["label"])]),_:1})]),_:1},8,["dark"])]),_:1},8,["modelValue","dark"])}var Fa=tt(sa,[["render",oa]]);const ia={name:"Bug",color:"red"},ra={name:"Suggestion",color:"orange"},ua={name:"Base Aperture",color:"blue"};var da={bug:ia,sg:ra,a_b:ua};const ca={name:"error",color:"red"},ma={name:"warning",color:"orange"},va={name:"info",color:"blue"},fa={name:"success",color:"green"};var ha={urgent:ca,high:ma,normal:va,low:fa};const ga={name:"TaskComponent",props:{task:Object,show:Boolean,_theme:String},emits:["update:show"],data(a){const l=b(a._theme),d=Gt(),h=b(a.show);return Q(()=>a.show,n=>{h.value=n}),Q(()=>a._theme,n=>{l.value=n}),{theme:l,showModal:h,categories:da,icons:ha,confirmDelete:(n,g)=>{d.dialog({title:this.$t("pages.tasks.titles.confirm_deletion"),message:this.$t("pages.tasks.messages.confirm_delete"),cancel:{label:this.$t("pages.tasks.buttons.cancel"),color:"grey-8"},persistent:!0,color:"red-5",dark:l.value==="dark",ok:{label:this.$t("pages.tasks.buttons.delete"),color:"red-5"}}).onOk(()=>{g(n)}).onCancel(()=>{})}}},methods:{filterByCategory(a,l){E.emit("filter-by-category",{label:l,value:a}),this.$emit("update:show",!1)},finalizeTask(a,l){nt(a,{status:l?"ended":"created"}).then(({status:d})=>{d===200&&(E.emit("task-updated"),E.emit("finalized-task"),this.$q.notify({message:this.$t("pages.tasks.messages.task_finalized"),color:"green-5",position:"bottom-right",timeout:2e3}),this.$emit("update:show",!1))}).catch(d=>{console.log(d)})},editTask(a){a.categories=a.categories.map(l=>({label:l.name,value:l.id})),E.emit("edit-task",a),this.$emit("update:edittask",!1)},confirm(a){ea(a).then(({status:l})=>{l===200&&(this.$q.notify({message:this.$t("pages.tasks.messages.task_deleted"),color:"green-5",position:"bottom-right",timeout:2e3}),E.emit("task-updated"),E.emit("deleted-task"),this.$emit("update:show",!1))}).catch(l=>{console.log(l)})}}},ya={class:"flex column t-tasks-task-options"},ka={style:{"white-space":"pre-line","user-select":"text"}};function wa(a,l,d,h,n,g){return K(),ne(st,{style:{height:"100%","z-index":"6000"},modelValue:n.showModal,"onUpdate:modelValue":l[4]||(l[4]=r=>n.showModal=r),dark:n.theme==="dark",class:"t-tasks-task",persistent:""},{default:j(()=>[p(at,{dark:n.theme==="dark",borderer:"",style:{"min-width":"80vw",height:"100%",position:"relative"},class:Ye({"q-pt-lg":!0,"t-task-card":!0,"t-light":n.theme!=="dark"})},{default:j(()=>[G("div",ya,[p(H,{dense:"",flat:"",round:"",icon:d.task.status==="ended"?"settings_backup_restore":"check",class:"q-mt-sm",onClick:l[0]||(l[0]=r=>g.finalizeTask(d.task.id,d.task.status==="created"))},null,8,["icon"]),p(H,{dense:"",flat:"",round:"",icon:"edit",class:"q-mt-md",onClick:l[1]||(l[1]=r=>g.editTask(d.task))}),p(H,{dense:"",flat:"",round:"",icon:"delete",class:"q-mt-md",color:"red-5",onClick:l[2]||(l[2]=r=>n.confirmDelete(d.task.id,g.confirm))})]),p(_e,null,{default:j(()=>[G("div",{class:Ye({"text-h6":!0,"text-white":n.theme==="dark","q-mb-md":!0,flex:!0,"flex-center":!0,"text-dark":n.theme!=="dark"})},[G("div",{class:Ye(d.task.status==="ended"?"text-green":"")},je(d.task.title),3),d.task.status!=="ended"?(K(),ne(be,{key:0,title:d.task.priority.name,name:n.icons[d.task.priority.name].name,color:n.icons[d.task.priority.name].color,class:"q-ml-sm",size:"sm"},null,8,["title","name","color"])):(K(),ne(be,{key:1,name:"check",style:{color:"green"},class:"q-ml-sm"}))],2),G("div",null,[(K(!0),Bt(Nt,null,It(d.task.categories,(r,_)=>(K(),ne(Zt,{key:_,label:r.name,style:Et("background-color: #"+r.color+" !important"),class:"q-mr-sm cursor-pointer",onClick:M=>g.filterByCategory(r.id,r.name)},{default:j(()=>[p(be,{name:r.icon,style:{color:"white"},class:"q-ml-sm"},null,8,["name"])]),_:2},1032,["label","style","onClick"]))),128))])]),_:1}),p(H,{dense:"",flat:"",round:"",icon:"close",onClick:l[3]||(l[3]=()=>a.$emit("update:show",!1)),class:"t-tasks-task-close"}),p(Qt,{inset:"",dark:n.theme==="dark"},null,8,["dark"]),p(_e,null,{default:j(()=>[G("p",ka,je(d.task.description),1)]),_:1})]),_:1},8,["dark","class"])]),_:1},8,["modelValue","dark"])}var Oa=tt(ga,[["render",wa]]);export{Fa as N,Oa as T,Va as a,Sa as b,Ya as c,ea as d,nt as e,$a as f,Xe as g,Ha as n};
